function onGeoSuccess(e){$("input[name='lat']").val(e.coords.latitude),$("input[name='long']").val(e.coords.longitude)}function onGeoError(e){console.log("code: "+e.code+"\nmessage: "+e.message+"\n")}function locateMe(){var e={timeout:3e4};watchID=navigator.geolocation.getCurrentPosition(onGeoSuccess,onGeoError,e)}function onDeviceReady(){pictureSource=navigator.camera.PictureSourceType,destinationType=navigator.camera.DestinationType}function onPhotoDataSuccess(e){var a=document.getElementById("smallImage"),t=$("input[name='post_data']");a.style.display="block",a.src="data:image/jpeg;base64,"+e,t.val("data:image/jpeg;base64,"+e)}function onPhotoURISuccess(e){var a=document.getElementById("largeImage");a.style.display="block",a.src=e}function capturePhoto(){navigator.camera.getPicture(onPhotoDataSuccess,onFail,{quality:50,targetWidth:400,targetHeight:400,destinationType:navigator.camera.DestinationType.DATA_URL})}function capturePhotoEdit(){navigator.camera.getPicture(onPhotoDataSuccess,onFail,{quality:20,allowEdit:!0,destinationType:navigator.camera.DestinationType.DATA_URL})}function getPhoto(e){navigator.camera.getPicture(onPhotoURISuccess,onFail,{quality:50,destinationType:navigator.camera.DestinationType.FILE_URI,sourceType:e})}function onFail(e){alert("Failed because: "+e)}function formToJSON(e){var a={};return $(e).find(":input[name]:enabled").each(function(){var e=$(this),t=e.attr("name");a[t]=a[t]?a[t]+","+e.val():e.val()}),a}function changePage(e,a){$.ajax({type:"POST",url:"http://gobeebot.com/",data:a,dataType:"json",success:function(a){$("nav a").removeClass("active"),$("nav a[name='"+e+"']").addClass("active");var t=$("#"+e).html(),o=Handlebars.compile(t);$("#content-placeholder").html(o(a))},error:function(e){$("#alerts").html(JSON.stringify(e))}})}Handlebars.registerHelper("each",function(e,a){for(var t="",o=0,n=e.length;n>o;o++)t+=a.fn(e[o]);return t}),locateMe();var pictureSource,destinationType;document.addEventListener("deviceready",onDeviceReady,!1),$(document).ready(function(){localStorage.getItem("userToken")&&($("input[name='auth_token']").val(localStorage.getItem("userToken")),$("input[name='handle']").val(localStorage.getItem("userHandle"))),changePage("posts_near_me",formToJSON("#form"))}),$("nav a").click(function(){locateMe();var e=$(this).attr("name");if($("input[name='request']").val(e),"new_post"===e){$("nav a").removeClass("active"),$("nav a[name='"+e+"']").addClass("active");var a=$("#"+e).html(),t=Handlebars.compile(a);$("#content-placeholder").html(t())}else{var o=formToJSON("#form");changePage(e,o)}}),$("#content-placeholder").on("click",".big_button a",function(){capturePhotoEdit()}),$("#content-placeholder").on("click","#new_post_submit",function(){var e=formToJSON("#form");$.ajax({type:"POST",url:"http://gobeebot.com/",data:e,dataType:"json",success:function(e){e.success?(console.log("sent"),console.log(JSON.stringify(e)),$("#smallImage").css({display:"none"})):(console.log("error"),e.errors&&console.log(e.errors))},error:function(e){$("#alerts").html(JSON.stringify(e))}})});